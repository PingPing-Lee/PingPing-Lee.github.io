(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{418:function(a,s,t){"use strict";t.r(s);var e=t(14),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("一款APP的发布流程无外乎：签名打包—>发布到各store这两大步骤。"),s("br"),a._v("\n实践发现 Android Stuio打包是行不通，我们采用React Native官方推荐的方式进行签名打包")]),a._v(" "),s("h2",{attrs:{id:"_1-生成android签名证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-生成android签名证书"}},[a._v("#")]),a._v(" 1. 生成Android签名证书")]),a._v(" "),s("p",[a._v("众所周知，Android要求所有的APP都需要进行数字签名后，才能够被安装到相应的设备上。如何获取签名证书请戳这里"),s("RouterLink",{attrs:{to:"/rn/keystore.html"}},[a._v("安卓签名证书")])],1),a._v(" "),s("h2",{attrs:{id:"_2-设置gradle变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-设置gradle变量"}},[a._v("#")]),a._v(" 2. 设置gradle变量")]),a._v(" "),s("ol",[s("li",[a._v("将你的签名证书copy到 android/app目录下。")]),a._v(" "),s("li",[a._v("编辑~/.gradle/gradle.properties或../android/gradle.properties(一个是全局gradle.properties，一个是项目中的gradle.properties，大家可以根据需要进行修改) ，加入如下代码：")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYAPP_RELEASE_STORE_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("ppl.keystore\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYAPP_RELEASE_KEY_ALIAS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("ppl.keystore\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYAPP_RELEASE_STORE_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("***\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYAPP_RELEASE_KEY_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("***\n")])])]),s("blockquote",[s("p",[a._v("MYAPP_RELEASE_STORE_FILE: keystore 的文件名"),s("br"),a._v("\nMYAPP_RELEASE_KEY_ALIAS: keystore 的别名"),s("br"),a._v("\nMYAPP_RELEASE_STORE_PASSWORD: keystore 的密码"),s("br"),a._v("\nMYAPP_RELEASE_KEY_PASSWORD: key 的密码")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/rn/gradle.png",alt:"gradle"}})]),a._v(" "),s("h2",{attrs:{id:"_3-在gradle配置文件中添加签名配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-在gradle配置文件中添加签名配置"}},[a._v("#")]),a._v(" 3. 在gradle配置文件中添加签名配置")]),a._v(" "),s("p",[a._v("编辑 android/app/build.gradle文件添加如下代码：")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\nandroid "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n    defaultConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    signingConfigs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        release "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            storeFile "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("MYAPP_RELEASE_STORE_FILE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n            storePassword "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("MYAPP_RELEASE_STORE_PASSWORD")]),a._v("\n            keyAlias "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("MYAPP_RELEASE_KEY_ALIAS")]),a._v("\n            keyPassword "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("MYAPP_RELEASE_KEY_PASSWORD")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    buildTypes "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        release "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n            signingConfig signingConfigs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("release\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n")])])]),s("h2",{attrs:{id:"_4-签名打包apk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-签名打包apk"}},[a._v("#")]),a._v(" 4. 签名打包APK")]),a._v(" "),s("p",[a._v("在终端进入到项目下的 android目录，运行如下代码：")]),a._v(" "),s("p",[s("code",[a._v("./gradlew assembleRelease")])]),a._v(" "),s("p",[a._v("签名打包成功后你会在 “android/app/build/outputs/apk/”目录下看到签名成功后的app-release.apk文件。")]),a._v(" "),s("p",[a._v("提示：如果你需要对apk进行混淆打包 编辑android/app/build.gradle：")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n * Run Proguard to shrink the Java bytecode in release builds.\n */")]),a._v("\ndef enableProguardInReleaseBuilds "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);