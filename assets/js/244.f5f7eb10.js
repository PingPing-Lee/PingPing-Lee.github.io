(window.webpackJsonp=window.webpackJsonp||[]).push([[244],{519:function(t,s,a){"use strict";a.r(s);var n=a(14),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("a",{attrs:{href:"'/webgl/base/coordinateSystem.md'"}},[t._v("添加事件")]),t._v(" 中实现了鼠标控制绘图，但是绘制的图形颜色都是一样的，如果想要改变可以通过 uniform 添加变量，具体如下：")]),t._v(" "),s("h2",{attrs:{id:"uniform"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uniform"}},[t._v("#")]),t._v(" uniform")]),t._v(" "),s("p",[t._v("uniform 在顶点着色器和片元着色器都可以用")]),t._v(" "),s("p",[t._v("和使用 attribute 变量一样，先来看一下声明格式：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/webgl/base/uniform.png",alt:"uniform"}})]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 片元着色器源码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FRAGMENT_SHADER_SOURCE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n    // 在片元着色器中没有默认的浮点数精度设置，在使用之前一定要先设置精度\n    precision mediump float;\n    uniform vec4 uColor;\n    void main() {\n        gl_FragColor = uColor;\n    }\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("上述代码中使用了精度限定词 precision：")]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("precision mediump float")]),t._v(" "),s("li",[t._v("在片元着色器中没有默认的浮点数精度设置，在使用之前一定要先设置精度")]),t._v(" "),s("li",[t._v("之前在顶点着色器源码里不需要设置精度是因为顶点着色器中默认设置了高精度")]),t._v(" "),s("li",[t._v("⾼精度: highp, 中精度: mediump, 低精度: lowp")])])]),t._v(" "),s("h2",{attrs:{id:"getuniformlocation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getuniformlocation"}},[t._v("#")]),t._v(" getUniformLocation")]),t._v(" "),s("p",[t._v("同样通过地址对 uniform 变量进行操作")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uColor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUniformLocation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("program"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uColor'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/img/webgl/base/getUniformLocation.webp",alt:"getUniformLocation"}})]),t._v(" "),s("h2",{attrs:{id:"uniform4f"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uniform4f"}},[t._v("#")]),t._v(" uniform4f")]),t._v(" "),s("p",[t._v("获取到 uniform 存储位置之后，我们就可以调用绘制上下文对象提供的API: uniform4f 向着色器注入数据")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("gl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uniform4f")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uColor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/img/webgl/base/uniform4f.png",alt:"uniform4f"}})]),t._v(" "),s("p",[t._v("这里需要特别注意一下 "),s("strong",[t._v("声明与赋值方法要对应")]),t._v("：")]),t._v(" "),s("p",[t._v("在着色器源码中定义了 vec4 类型，在赋值时就要使用 uniform4f 与之对应，其他几个同组函数也是一样")]),t._v(" "),s("p",[t._v("但是这里有个问题就是 gl_FragColor 的类型必须是 vec4 类型的，所以如果我们在定义成其他类型时需要转换一下")]),t._v(" "),s("p",[t._v("以 vec2 类型为例，需要修改代码：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改片元着色器源码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FRAGMENT_SHADER_SOURCE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n    // 在片元着色器中没有默认的浮点数精度设置，在使用之前一定要先设置精度\n    precision mediump float;\n    uniform vec2 uColor;\n    void main() {\n        gl_FragColor = vec4(uColor.r, uColor.g, 0.0,1.0); // vec4\n    }\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改赋值方法")]),t._v("\ngl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uniform2f")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uColor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"同族函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同族函数"}},[t._v("#")]),t._v(" 同族函数")]),t._v(" "),s("p",[t._v("uniform4f 也同样有一系列 "),s("strong",[t._v("同族函数")]),t._v("：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/webgl/base/uniform4tz.webp",alt:"uniform4tz"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);