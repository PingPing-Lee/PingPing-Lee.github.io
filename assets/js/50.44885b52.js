(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{322:function(t,a,e){"use strict";e.r(a);var r=e(14),v=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("没有完美的跨端技术，只有适合的场景")]),t._v(" "),a("p",[t._v("这篇文章我们就来看看目前流行几种跨端方案不同")]),t._v(" "),a("h2",{attrs:{id:"小程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序"}},[t._v("#")]),t._v(" 小程序")]),t._v(" "),a("p",[t._v("写过微信小程序的开发者应该都知道，小程序本质上就是在一个应用程序中再嵌入另一个应用程序。开发者可以通过微信提供的技术能力，轻易地实现跨端，节约成本。")]),t._v(" "),a("h4",{attrs:{id:"跨端思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨端思路"}},[t._v("#")]),t._v(" 跨端思路")]),t._v(" "),a("p",[t._v("小程序的跨端方案就是使用部分原生组件代替部分 WebView 组件，这个思路是受到 React Native 这类框架的启发，因此也叫做 RN-like 方案。")]),t._v(" "),a("p",[t._v("我们都知道微信小程序有自己的一套开发框架和语言，如描述页面基础组件的 WXML（WeiXin Markup Language），以及用于描述页面样式的 WXSS （WeiXin Style Sheets）。")]),t._v(" "),a("p",[t._v("当 WXML/WXSS 发生改变，也就是 UI 页面发生改变的时候，小程序前端公共库（WXA Framework）会进行一些内部运算，以操作指令的形式将变化结果提交给 C++，具体的布局计算、CSS 样式更新和 DOM 结构变化都是由 C++ 这一层实现的。C++ 计算完成后，再决定是调用 WebView 渲染组件，还是调用原生视图渲染组件。")]),t._v(" "),a("h2",{attrs:{id:"flutter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flutter"}},[t._v("#")]),t._v(" Flutter")]),t._v(" "),a("p",[t._v("Flutter 是 Google 推出的全新跨平台移动开发框架。因为出色的性能、高效的开发方式等原因，Flutter 正被越来越多的开发者和组织采用。")]),t._v(" "),a("p",[t._v("Flutter 现在的定位是一个跨平台 UI 开发工具（UI tookit），深入拆分原理会发现 Flutter 和浏览器有很多相似之处，如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/hybrid/flutterChrome.png",alt:"flutterChrome"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Flutter 和浏览器都是跨平台的，而且它们主要用的渲染引擎都是 Skia。")])]),t._v(" "),a("li",[a("p",[t._v("在语言层面上，Flutter 采用的是 Dart，浏览器用的是 JavaScript。Dart 语言和 JavaScript 非常类似，因为 Dart 诞生之初的目标就是想替代 JavaScript。而在框架底层，二者都是用 C++。")])]),t._v(" "),a("li",[a("p",[t._v("在和原生应用通讯上，Flutter 提供了消息通道（EventChannel ）和接口通道（MethodChannel ）两套通信机制。消息通道的原理类似于 React Native 老架构的“bridge”，跨语言通讯的消息都需要进行序列化和反序列化。接口通道的原理类似 JavaScript 直接调用 C++，利用的是引擎提供的脚本语言和 C++ 之间调用能力。")])])]),t._v(" "),a("h2",{attrs:{id:"react-native"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-native"}},[t._v("#")]),t._v(" React Native")]),t._v(" "),a("p",[t._v("和小程序、Flutter 一样，React Native 也是一个非常流行的跨端框架，同样受到很高的认可度。")]),t._v(" "),a("p",[t._v("相对较Flutter 的Dart，React Native 采用的是 JavaScript，和前端技术生态重合度很高，对前端同学来学习成本更低。")]),t._v(" "),a("p",[t._v("苹果政策规定只有使用 JavaScriptCore 作为引擎的应用才能动态更新，所以 Flutter 的热更新不是那么的友好，React Native 相对比较友好。")]),t._v(" "),a("p",[t._v("从整体框架结构上对比:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/hybrid/rnf.png",alt:"RNFlutter"}})]),t._v(" "),a("ul",[a("li",[t._v("从 React Native 的渲染路径图中可以看出来，React Native 最上层的业务语言是 JavaScript，下一层是 C++。C++ 的核心功能主要是布局计算，并且起到了黏合剂的作用，连接了 JavaScript（JS VM） 和 Java（JNI）/OC。通过 Java 和 OC 对操作系统提供的原生组件进行增删改查，最后由操作系统调用渲染引擎将原生组件渲染出来。")]),t._v(" "),a("li",[t._v("从 Flutter 使用原生组件时的渲染路径图可以看到，Flutter 最上层的业务语言是 Dart，下一层也是 C++。C++ 的核心功能也是布局计算和黏合剂，由于是原生组件所以不会使用 Skia 渲染引擎，而是继续调用 Java/OC，最后也是由系统调用渲染引擎才能渲染原生组件。")])])])}),[],!1,null,null,null);a.default=v.exports}}]);