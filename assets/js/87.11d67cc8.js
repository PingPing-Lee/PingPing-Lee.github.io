(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{358:function(t,s,a){"use strict";a.r(s);var n=a(14),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("NodeJS ä¸­çš„å¼‚æ­¥ç¦»ä¸å¼€ "),s("strong",[t._v("éžé˜»å¡ž I/O")]),t._v(" å’Œ "),s("strong",[t._v("äº‹ä»¶å¾ªçŽ¯")])]),t._v(" "),s("h2",{attrs:{id:"éžé˜»å¡ž-i-o"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#éžé˜»å¡ž-i-o"}},[t._v("#")]),t._v(" éžé˜»å¡ž I/O")]),t._v(" "),s("ul",[s("li",[t._v("I/O å³ Input/Outputï¼Œä¸€ä¸ªç³»ç»Ÿçš„è¾“å…¥å’Œè¾“å‡ºã€‚")]),t._v(" "),s("li",[t._v("é˜»å¡ž I/O å’Œéžé˜»å¡ž I/O çš„åŒºåˆ«å°±åœ¨äºŽç³»ç»ŸæŽ¥æ”¶è¾“å…¥å†åˆ°è¾“å‡ºæœŸé—´ï¼Œèƒ½ä¸èƒ½æŽ¥æ”¶å…¶ä»–è¾“å…¥")])]),t._v(" "),s("p",[t._v("å…·ä½“è§£é‡Šèµ·æ¥æˆ‘ä»¬ä»¥ä¸‹é¢è¿™ä¸ªé¢˜ç›®ä¸ºä¾‹å­ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/node/fzs.png",alt:"éžé˜»å¡ž"}})]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("é¦–å…ˆå°èŠ³æ˜¯è¦è¿›è¡Œ Input/Output çš„ç³»ç»Ÿ")]),t._v(" "),s("li",[t._v("å¦‚æžœå°èŠ³ä¸€ä»¶ä»¶çš„åŽ»åšäº‹ï¼Œé‚£æ€»å…±éœ€è¦ 20 + 10 + 10 + 5 = 45 åˆ†é’Ÿï¼Œè¿™å°±æ˜¯ é˜»å¡ž I/O")]),t._v(" "),s("li",[t._v("å¦‚æžœå°èŠ³åœ¨æ´—è¡£æœºæ´—è¡£æœçš„åŒæ—¶ï¼ŒåŽ»æ‰«åœ°å’Œæ•´ç†ä¹¦ç±ï¼Œé‚£ä¹ˆåªéœ€è¦ 20 + 5 = 25 åˆ†é’Ÿï¼Œè¿™å°±æ˜¯ éžé˜»å¡ž I/O")])])]),t._v(" "),s("p",[t._v("æ€»ç»“ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç†è§£åˆ¤æ–­ä¸€ä¸ªç¨‹åºæ˜¯å¦æ˜¯ éžé˜»å¡ž I/O çš„è¦ç‚¹åœ¨äºŽï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ç¡®å®šä¸€ä¸ªè¿›è¡Œ Input/Output çš„ç³»ç»Ÿã€‚")]),t._v(" "),s("li",[t._v("æ€è€ƒåœ¨ I/O è¿‡ç¨‹ä¸­ï¼Œèƒ½ä¸èƒ½è¿›è¡Œå…¶ä»– I/Oã€‚")])]),t._v(" "),s("h2",{attrs:{id:"äº‹ä»¶å¾ªçŽ¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº‹ä»¶å¾ªçŽ¯"}},[t._v("#")]),t._v(" äº‹ä»¶å¾ªçŽ¯")]),t._v(" "),s("p",[t._v("åœ¨äº†è§£ Node çš„äº‹ä»¶å¾ªçŽ¯ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹å¼ node ç³»ç»Ÿæž¶æž„å›¾ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/node/nodenzmk.png",alt:"å†…ç½®æ¨¡å—"}})]),t._v(" "),s("ul",[s("li",[t._v("å›¾ä¸­æœ€å³ä¾§çš„ Blocking Operation å’Œ Execute Callback å°±æ˜¯ä¸Šé¢çš„ éžé˜»å¡ž I/O éƒ¨åˆ†")]),t._v(" "),s("li",[t._v("ç´§é‚»ç€çš„å°±æ˜¯äº‹ä»¶å¾ªçŽ¯ Event Loopï¼Œæ‰€ä»¥äº‹ä»¶å¾ªçŽ¯æ˜¯ Node å®žçŽ°éžé˜»å¡ž I/O çš„å…³é”®éƒ¨åˆ†ï¼Œæ˜¯éžé˜»å¡ž I/O çš„åŸºç¡€")]),t._v(" "),s("li",[t._v("éžé˜»å¡ž I/O å’Œ Event Loop éƒ½æ˜¯ LIBUV è¿™ä¸ª c++ åº“æ‰€æä¾›çš„èƒ½åŠ›")])]),t._v(" "),s("p",[t._v("æ•´ä¸ªæµç¨‹å¤§è‡´å¯ä»¥ç†è§£ä¸º ä»Ž NodeJS çš„åº”ç”¨ä»£ç å¼€å§‹ï¼Œè°ƒç”¨åˆ° NodeJS çš„åº•å±‚åº“ï¼Œå†…ç½®æ¨¡å—å†åŽ»è°ƒç”¨ c++ æ¨¡å—ï¼Œc++ æ¨¡å—å†è°ƒç”¨ c++ çš„åº•å±‚å‡½æ•°å¤„ç†äº‹ä»¶çš„å¾ªçŽ¯ï¼Œå½“äº‹ä»¶å®Œæˆä¹‹åŽæŠŠæ•°æ®å›žè°ƒå‡ºåŽ»ï¼Œè¿”å›žç»™ NodeJS çš„å†…ç½®æ¨¡å—ï¼Œå†…ç½®æ¨¡å—å†è¿”å›žç»™åº”ç”¨")]),t._v(" "),s("h2",{attrs:{id:"å¼‚æ­¥ç¼–ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚æ­¥ç¼–ç¨‹"}},[t._v("#")]),t._v(" å¼‚æ­¥ç¼–ç¨‹")]),t._v(" "),s("p",[t._v("NodeJS ä¸­ðŸˆ¶ï¸å¾ˆå¤šå¤§é‡çš„ "),s("strong",[t._v("éžé˜»å¡ž I/O")]),t._v(" ï¼Œè¿™äº› "),s("strong",[t._v("éžé˜»å¡ž I/O")]),t._v(" çš„ç¨‹åºè¿è¡Œç»“æžœæ˜¯éœ€è¦å›žè°ƒå‡½æ•°æ¥èŽ·å–çš„ï¼Œè¿™ç§é€šè¿‡å›žè°ƒå‡½æ•°æ¥ç¼–ç¨‹çš„æ–¹å¼å°±ç§°ä¸º "),s("strong",[t._v("å¼‚æ­¥ç¼–ç¨‹")])]),t._v(" "),s("p",[t._v("è¿™é‡Œçš„å›žè°ƒå‡½æ•°æ˜¯æœ‰æ ¼å¼è§„èŒƒçš„ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å›žè°ƒå‡½æ•°æ ¼å¼è§„èŒƒ\n"),s("ul",[s("li",[t._v("error-first callback")]),t._v(" "),s("li",[t._v("node-style callback")])])]),t._v(" "),s("li",[t._v("ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ errorï¼ŒåŽé¢çš„å‚æ•°æ‰æ˜¯ç»“æžœ")])]),t._v(" "),s("p",[s("strong",[t._v("ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é”™è¯¯ä¼šåœ¨ç¬¬ä¸€ä¸ªå‚æ•°é‡Œå›žè°ƒå‡ºæ¥")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interview")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cry'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'smile'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interview")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fail'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ä¸ºäº†é˜²æ­¢å›žè°ƒå‡½æ•°å±‚å±‚åµŒå¥—ã€å¼‚æ­¥å¹¶å‘ç­‰é—®é¢˜ï¼Œå¯ä»¥å€ŸåŠ© npm åŒ… "),s("a",{attrs:{href:"https://www.npmjs.com/package/async",target:"_blank",rel:"noopener noreferrer"}},[t._v("Async.js"),s("OutboundLink")],1),t._v("ï¼Œæ˜¯ä¸€ä¸ªå·¥å…·æ¨¡å—ï¼Œæä¾›äº†ç›´æŽ¥è€Œå¼ºå¤§çš„ JavaScript å¼‚æ­¥åŠŸèƒ½ã€‚è™½ç„¶æ˜¯ä¸º Node.js è®¾è®¡çš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç›´æŽ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨")]),t._v(" "),s("h2",{attrs:{id:"promise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promise"}},[t._v("#")]),t._v(" Promise")]),t._v(" "),s("ul",[s("li",[t._v("å½“å‰äº‹ä»¶å¾ªçŽ¯å¾—ä¸åˆ°çš„ç»“æžœï¼Œä½†æœªæ¥çš„äº‹ä»¶å¾ªçŽ¯ä¼šç»™åˆ°ä½ ç»“æžœ")]),t._v(" "),s("li",[t._v("æ˜¯ä¸€ä¸ªçŠ¶æ€æœº\n"),s("ul",[s("li",[t._v("pending")]),t._v(" "),s("li",[t._v("fulfilled / resolved")]),t._v(" "),s("li",[t._v("rejected"),s("br"),t._v(" "),s("img",{attrs:{src:"/img/node/promise.png",alt:"Promise"}})])])]),t._v(" "),s("li",[t._v(".then å’Œ .catch\n"),s("ul",[s("li",[t._v("resolved çŠ¶æ€çš„ Promise ä¼šå›žè°ƒåŽé¢çš„ç¬¬ä¸€ä¸ª .then")]),t._v(" "),s("li",[t._v("rejected çŠ¶æ€çš„ Promise ä¼šå›žè°ƒåŽé¢çš„ç¬¬ä¸€ä¸ª .catch")]),t._v(" "),s("li",[t._v("ä»»ä½•ä¸€ä¸ª rejected çŠ¶æ€ä¸”åŽé¢æ²¡æœ‰ .catch çš„ Promiseï¼Œéƒ½ä¼šé€ æˆ æµè§ˆå™¨ /node çŽ¯å¢ƒ\nçš„å…¨å±€é”™è¯¯")])])]),t._v(" "),s("li",[t._v("æ‰§è¡Œ then å’Œ catch ä¼šè¿”å›žä¸€ä¸ªæ–° Promiseï¼Œè¯¥ Promise æœ€ç»ˆçŠ¶æ€æ ¹æ® then å’Œ catch çš„å›žè°ƒå‡½æ•°çš„æ‰§è¡Œç»“æžœå†³å®š\n"),s("ul",[s("li",[t._v("å¦‚æžœå›žè°ƒå‡½æ•°æœ€ç»ˆæ˜¯ throwï¼Œè¯¥ Promise æ˜¯ rejected çŠ¶æ€")]),t._v(" "),s("li",[t._v("å¦‚æžœå›žè°ƒå‡½æ•°æœ€ç»ˆæ˜¯ returnï¼Œè¯¥ Promise æ˜¯ resolved çŠ¶æ€")])])])]),t._v(" "),s("p",[s("strong",[t._v("ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * åˆ©ç”¨ Promise.all ä»£æ›¿é“¾å¼è°ƒç”¨æ¥å®Œæˆå¼‚æ­¥å¹¶è¡Œä»»åŠ¡\n */")]),t._v("\n Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interview")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interview")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interview")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("round")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" error "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'failed'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("round "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"async-await"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-await"}},[t._v("#")]),t._v(" async/await")]),t._v(" "),s("ul",[s("li",[t._v("async function æ˜¯ return Promiseçš„æ™®é€šå‡½æ•°ï¼Œå…¶å®žå°±æ˜¯ Promise çš„è¯­æ³•ç³–å°è£…")]),t._v(" "),s("li",[t._v("å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæžæ–¹æ¡ˆ â€“ ä»¥åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥\n"),s("ul",[s("li",[t._v("await å…³é”®å­—å¯ä»¥â€œæš‚åœâ€async functionçš„æ‰§è¡Œ")]),t._v(" "),s("li",[t._v("await å…³é”®å­—å¯ä»¥ä»¥åŒæ­¥çš„å†™æ³•èŽ·å– Promise çš„æ‰§è¡Œç»“æžœ")]),t._v(" "),s("li",[t._v("try-catch å¯ä»¥èŽ·å– await æ‰€å¾—åˆ°çš„é”™è¯¯")])])]),t._v(" "),s("li",[t._v("ä¸€ä¸ªç©¿è¶Šäº‹ä»¶å¾ªçŽ¯å­˜åœ¨çš„ function")])]),t._v(" "),s("p",[s("strong",[t._v("ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interview")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interview")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cry at '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'smile'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interview")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("round")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" error "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'failed'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("round "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" round"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);