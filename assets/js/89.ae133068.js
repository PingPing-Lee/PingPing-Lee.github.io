(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{404:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("在开始手写node 之前再来熟悉几个名词：")]),t._v(" "),s("h2",{attrs:{id:"bff-层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bff-层"}},[t._v("#")]),t._v(" BFF 层")]),t._v(" "),s("p",[t._v("BFF，既 Backend For Frontend，翻译过来就是前端的后端，其实就是前端与后端之间加一个中间层，具体通过图来看一下：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/node/BFF.png",alt:"BFF层"}})]),t._v(" "),s("ul",[s("li",[t._v("在BFF层向下调用各种后端微服务，后端为BFF层的前端提供的 RPC 接口")]),t._v(" "),s("li",[t._v("BFF 层则直接调用服务端 RPC 接口拿到数据，按需加工数据，然后向上给各种前端(客户端)应用提供接口服务")]),t._v(" "),s("li",[t._v("BFF层 发挥着 UI适配层和API聚合层，主要是跟进UI的迭代，对后端的接口进行组合、拆分、分化、聚合等")]),t._v(" "),s("li",[t._v("Node 就可以是 BFF 层的技术栈")])]),t._v(" "),s("h2",{attrs:{id:"开发环境安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发环境安装"}},[t._v("#")]),t._v(" 开发环境安装")]),t._v(" "),s("p",[t._v("Node.js 的安装直接官网下载就可以了，较为简单，同时还需要安装 Chrome 浏览器和 Visual Studio Code 代码编辑器")]),t._v(" "),s("h2",{attrs:{id:"commonjs模块规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commonjs模块规范"}},[t._v("#")]),t._v(" CommonJS模块规范")]),t._v(" "),s("p",[t._v("在 传统的 HTML 中，都是通过 "),s("script"),t._v(" 标签去加载JS，如果有 src 属性。浏览器就会从服务端加载一个 JS 脚本并且执行，如果没有 src 就会直接执行标签里面的代码，但是这种方式会有很多问题：")]),t._v(" "),s("ul",[s("li",[t._v("脚本变多时，需要手动管理加载顺序")]),t._v(" "),s("li",[t._v("不同脚本之间逻辑调用，需要通过全局变量的方式")]),t._v(" "),s("li",[t._v("没有 html 怎么办")])]),t._v(" "),s("p",[t._v("在 Node 中是没有"),s("script"),t._v(" 标签的，需要有自己的模块管理机制来管理 JS 的加载，从而 commonJS 模块规范就诞生了")]),t._v(" "),s("ul",[s("li",[t._v("commonJS 是由 JavaScript 社区发起，在 Node.js 上应用并推广")]),t._v(" "),s("li",[t._v("commonJS 模块规范是做一个大型node 应用程序的基础")])]),t._v(" "),s("h2",{attrs:{id:"npm及npm包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm及npm包"}},[t._v("#")]),t._v(" npm及npm包")]),t._v(" "),s("p",[t._v("npm(Node.js Package Manager)是一个Node.js的包管理工具，用来解决 Node.js 代码部署问题。在安装Node.js时会自动安装相应的npm版本,不需要单独安装。")]),t._v(" "),s("p",[t._v("所谓的包就是别人写的 Node.js 模块，可以从 npm 服务器下载到本地使用，也可以将自己编写的模块或命令行程序上传到npm服务器供别人使用")]),t._v(" "),s("h2",{attrs:{id:"模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块"}},[t._v("#")]),t._v(" 模块")]),t._v(" "),s("p",[t._v("Node.js 有很多模块，也正是这些模块壮大了 Node.js 的能力")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("第三方模块"),s("br"),t._v("\n先使用指令安装 "),s("strong",[s("code",[t._v("npm install")])]),t._v(" 第三方模块，之后再调用")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" CPUStat "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cpu-stat"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nCPUStat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("usagePercent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" percent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("CPU占用率 ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("percent"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("自定义模块")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导出")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导入")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("内置模块"),s("br"),t._v("\nNode.js 有很多内置模块，提供了 Node 和操作系统交互的能力，使用示例如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" os "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"os"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mem "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("freemem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("totalmem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'内存占用率'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);